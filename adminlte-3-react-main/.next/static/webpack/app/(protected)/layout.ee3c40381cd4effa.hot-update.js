"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/(protected)/layout",{

/***/ "(app-pages-browser)/./src/hooks/useAuthorization.ts":
/*!***************************************!*\
  !*** ./src/hooks/useAuthorization.ts ***!
  \***************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useAuthorization: function() { return /* binding */ useAuthorization; }\n/* harmony export */ });\n/* harmony import */ var _swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @swc/helpers/_/_to_consumable_array */ \"(app-pages-browser)/./node_modules/@swc/helpers/esm/_to_consumable_array.js\");\n/* harmony import */ var _app_store_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @app/store/store */ \"(app-pages-browser)/./src/store/store.ts\");\n/* harmony import */ var _app_utils_menu__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @app/utils/menu */ \"(app-pages-browser)/./src/utils/menu.ts\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-router-dom */ \"(app-pages-browser)/./node_modules/react-router/dist/index.js\");\n\n\n\n\n\nvar useAuthorization = function() {\n    var currentUser = (0,_app_store_store__WEBPACK_IMPORTED_MODULE_0__.useAppSelector)(function(state) {\n        return state.auth.currentUser;\n    });\n    var sidebarAccessByRole = (0,_app_store_store__WEBPACK_IMPORTED_MODULE_0__.useAppSelector)(function(state) {\n        return state.auth.sidebarAccessByRole;\n    });\n    var location = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_3__.useLocation)();\n    var userRoles = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(function() {\n        var _currentUser_metadata, _currentUser_metadata1, _currentUser_metadata2;\n        var normalize = function(role) {\n            if (!role) return null;\n            if (typeof role === \"string\") return role;\n            if (typeof role === \"object\" && role.name) return role.name;\n            return null;\n        };\n        var rolesFromUser = Array.isArray(currentUser === null || currentUser === void 0 ? void 0 : currentUser.roles) ? currentUser === null || currentUser === void 0 ? void 0 : currentUser.roles.map(normalize) : [];\n        var roleFromUser = (currentUser === null || currentUser === void 0 ? void 0 : currentUser.role) ? [\n            normalize(currentUser.role)\n        ] : [];\n        var rolesFromMetadata = Array.isArray(currentUser === null || currentUser === void 0 ? void 0 : (_currentUser_metadata = currentUser.metadata) === null || _currentUser_metadata === void 0 ? void 0 : _currentUser_metadata.roles) ? currentUser === null || currentUser === void 0 ? void 0 : (_currentUser_metadata1 = currentUser.metadata) === null || _currentUser_metadata1 === void 0 ? void 0 : _currentUser_metadata1.roles.map(normalize) : (currentUser === null || currentUser === void 0 ? void 0 : (_currentUser_metadata2 = currentUser.metadata) === null || _currentUser_metadata2 === void 0 ? void 0 : _currentUser_metadata2.role) ? [\n            normalize(currentUser.metadata.role)\n        ] : [];\n        var normalized = Array.from(new Set((0,_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_4__._)(rolesFromUser).concat((0,_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_4__._)(roleFromUser), (0,_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_4__._)(rolesFromMetadata)).filter(Boolean)));\n        // Frontend fallback: treat known superadmin account as superadmin\n        if (normalized.length === 0 && currentUser && typeof currentUser.email === \"string\" && currentUser.email.toLowerCase() === \"superadmin@example.com\") {\n            return [\n                \"superadmin\"\n            ];\n        }\n        return normalized;\n    }, [\n        currentUser\n    ]);\n    var userPermissions = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(function() {\n        var _currentUser_metadata, _currentUser_metadata1;\n        var permissionsFromUser = Array.isArray(currentUser === null || currentUser === void 0 ? void 0 : currentUser.permissions) ? currentUser === null || currentUser === void 0 ? void 0 : currentUser.permissions : [];\n        var permissionsFromMetadata = Array.isArray(currentUser === null || currentUser === void 0 ? void 0 : (_currentUser_metadata = currentUser.metadata) === null || _currentUser_metadata === void 0 ? void 0 : _currentUser_metadata.permissions) ? currentUser === null || currentUser === void 0 ? void 0 : (_currentUser_metadata1 = currentUser.metadata) === null || _currentUser_metadata1 === void 0 ? void 0 : _currentUser_metadata1.permissions : [];\n        return Array.from(new Set((0,_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_4__._)(permissionsFromUser).concat((0,_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_4__._)(permissionsFromMetadata)).filter(Boolean)));\n    }, [\n        currentUser\n    ]);\n    var roleBasedAllowedPaths = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(function() {\n        var allowed = new Set();\n        userRoles.forEach(function(role) {\n            var roleAccess = sidebarAccessByRole[role];\n            if (roleAccess === null || roleAccess === void 0 ? void 0 : roleAccess.includes(\"*\")) {\n                // Allow all defined menu paths\n                var addPaths = function(items) {\n                    items.forEach(function(m) {\n                        if (m.path) allowed.add(m.path);\n                        if (m.children) addPaths(m.children);\n                    });\n                };\n                addPaths(_app_utils_menu__WEBPACK_IMPORTED_MODULE_1__.MENU);\n            }\n            if (Array.isArray(roleAccess)) {\n                roleAccess.forEach(function(path) {\n                    return allowed.add(path);\n                });\n            }\n        });\n        return allowed;\n    }, [\n        sidebarAccessByRole,\n        userRoles\n    ]);\n    var checkAccess = function(targetPath) {\n        // 1. Check if superadmin\n        if (userRoles.includes(\"superadmin\")) return true;\n        // 2. Check if the path is explicitly allowed via dynamic permissions\n        // We need to handle exact matches or sub-paths if necessary.\n        // For now, assuming exact path or basic prefix match might be tricky.\n        // The existing logic seems to be exact path based on Menu items.\n        if (roleBasedAllowedPaths.has(targetPath)) return true;\n        // 3. Find the menu item corresponding to this path to check its static restrictions\n        // Flatten menu to find item\n        var findItem = function(items, path) {\n            var _iteratorNormalCompletion = true, _didIteratorError = false, _iteratorError = undefined;\n            try {\n                for(var _iterator = items[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true){\n                    var item = _step.value;\n                    // Handle parameterized routes: e.g. /users/:id/edit logic\n                    // But MENU definition usually has static paths like /users.\n                    // If the MENU path is /users, does it cover /users/create?\n                    // Usually route protection is hierarchical.\n                    // Exact match\n                    if (item.path === path) return item;\n                    if (item.children) {\n                        var found = findItem(item.children, path);\n                        if (found) return found;\n                    }\n                }\n            } catch (err) {\n                _didIteratorError = true;\n                _iteratorError = err;\n            } finally{\n                try {\n                    if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n                        _iterator[\"return\"]();\n                    }\n                } finally{\n                    if (_didIteratorError) {\n                        throw _iteratorError;\n                    }\n                }\n            }\n            return undefined;\n        };\n        // Note: The Sidebar logic checks \"canAccess(item)\" where item is iterating over MENU.\n        // Here we have a path and need to decide if we can access it.\n        // Challenge: The URL might be /users/create, but MENU only has /users.\n        // Or MENU has /users/create?\n        // Let's look at MENU definitions in `menu.ts` (extracted).\n        // /users is there. /users/create is NOT in the MENU constant I saw later in App.tsx list, but not in the MENU array?\n        // Wait, App.tsx has:\n        // <Route path=\"/users/create\" element={<CreateUser />} />\n        // But MENU in MenuSidebar.tsx (and now menu.ts) has:\n        // { name: ..., path: \"/users\", allowedRoles: [\"superadmin\"] }\n        // It does NOT have /users/create explicitly in the sidebar menu.\n        // So if I navigate to /users/create, I need to know it belongs to the \"/users\" capability or is restricted.\n        // If the rule is \"Only superadmin can access /users\", does that imply /users/create?\n        // Current MenuSidebar logic:\n        // It filters what is SHOWN. If /users is hidden, the user can't click it.\n        // But if they type /users/create, we need to block it.\n        // Heuristic:\n        // If a requested path starts with a restricted menu item's path, it should be restricted unless explicit permission exists.\n        var matchItem = function(items, path) {\n            // Find the most specific match (longest path prefix)\n            var bestMatch;\n            var search = function(nodes) {\n                var _iteratorNormalCompletion = true, _didIteratorError = false, _iteratorError = undefined;\n                try {\n                    for(var _iterator = nodes[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true){\n                        var node = _step.value;\n                        if (node.path && path.startsWith(node.path)) {\n                            if (!bestMatch || node.path.length > bestMatch.path.length) {\n                                bestMatch = node;\n                            }\n                        }\n                        if (node.children) search(node.children);\n                    }\n                } catch (err) {\n                    _didIteratorError = true;\n                    _iteratorError = err;\n                } finally{\n                    try {\n                        if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n                            _iterator[\"return\"]();\n                        }\n                    } finally{\n                        if (_didIteratorError) {\n                            throw _iteratorError;\n                        }\n                    }\n                }\n            };\n            search(items);\n            return bestMatch;\n        };\n        var matchedItem = matchItem(_app_utils_menu__WEBPACK_IMPORTED_MODULE_1__.MENU, targetPath);\n        if (!matchedItem) {\n            // If the path isn't in the menu logic at all, defaulting to ALLOW or BLOCK?\n            // Usually if it's not a protected feature, it's public?\n            // But these are authenticated routes.\n            // If I don't know about it, maybe allow it (like dashboard, profile).\n            return true;\n        }\n        // If we found an item, check its roles\n        var roleAllowed = !matchedItem.allowedRoles || matchedItem.allowedRoles.length === 0 || matchedItem.allowedRoles.some(function(role) {\n            return userRoles.includes(role);\n        });\n        var permissionAllowed = !matchedItem.allowedPermissions || matchedItem.allowedPermissions.length === 0 || matchedItem.allowedPermissions.some(function(permission) {\n            return userPermissions.includes(permission);\n        });\n        if (roleAllowed && permissionAllowed) return true;\n        return false;\n    };\n    var checkPermission = function(action) {\n        if (userRoles.includes(\"superadmin\")) return true;\n        return userPermissions.includes(action);\n    };\n    return {\n        checkAccess: checkAccess,\n        checkPermission: checkPermission,\n        userRoles: userRoles,\n        roleBasedAllowedPaths: roleBasedAllowedPaths\n    };\n};\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9ob29rcy91c2VBdXRob3JpemF0aW9uLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQWtEO0FBQ0E7QUFDbEI7QUFDZTtBQUV4QyxJQUFNSSxtQkFBbUI7SUFDOUIsSUFBTUMsY0FBY0wsZ0VBQWNBLENBQUMsU0FBQ007ZUFBVUEsTUFBTUMsSUFBSSxDQUFDRixXQUFXOztJQUNwRSxJQUFNRyxzQkFBc0JSLGdFQUFjQSxDQUN4QyxTQUFDTTtlQUFVQSxNQUFNQyxJQUFJLENBQUNDLG1CQUFtQjs7SUFFM0MsSUFBTUMsV0FBV04sNkRBQVdBO0lBRTVCLElBQU1PLFlBQVlSLDhDQUFPQSxDQUFDO1lBWWdCRyx1QkFDcENBLHdCQUNBQTtRQWJKLElBQU1NLFlBQVksU0FBQ0M7WUFDakIsSUFBSSxDQUFDQSxNQUFNLE9BQU87WUFDbEIsSUFBSSxPQUFPQSxTQUFTLFVBQVUsT0FBT0E7WUFDckMsSUFBSSxPQUFPQSxTQUFTLFlBQVlBLEtBQUtDLElBQUksRUFBRSxPQUFPRCxLQUFLQyxJQUFJO1lBQzNELE9BQU87UUFDVDtRQUVBLElBQU1DLGdCQUFnQkMsTUFBTUMsT0FBTyxDQUFDWCx3QkFBQUEsa0NBQUFBLFlBQWFZLEtBQUssSUFDbERaLHdCQUFBQSxrQ0FBQUEsWUFBYVksS0FBSyxDQUFDQyxHQUFHLENBQUNQLGFBQ3ZCLEVBQUU7UUFDTixJQUFNUSxlQUFlZCxDQUFBQSx3QkFBQUEsa0NBQUFBLFlBQWFPLElBQUksSUFBRztZQUFDRCxVQUFVTixZQUFZTyxJQUFJO1NBQUUsR0FBRyxFQUFFO1FBQzNFLElBQU1RLG9CQUFvQkwsTUFBTUMsT0FBTyxDQUFDWCx3QkFBQUEsbUNBQUFBLHdCQUFBQSxZQUFhZ0IsUUFBUSxjQUFyQmhCLDRDQUFBQSxzQkFBdUJZLEtBQUssSUFDaEVaLHdCQUFBQSxtQ0FBQUEseUJBQUFBLFlBQWFnQixRQUFRLGNBQXJCaEIsNkNBQUFBLHVCQUF1QlksS0FBSyxDQUFDQyxHQUFHLENB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RTtZQUN0RSxPQUFPO1FBQ1Q7UUFFQSx1Q0FBdUM7UUFDdkMsSUFBTUMsY0FDSixDQUFDRCxZQUFZRSxZQUFZLElBQ3pCRixZQUFZRSxZQUFZLENBQUNqQyxNQUFNLEtBQUssS0FDcEMrQixZQUFZRSxZQUFZLENBQUNDLElBQUksQ0FBQyxTQUFDakQ7bUJBQVNGLFVBQVU0QixRQUFRLENBQUMxQjs7UUFFN0QsSUFBTWtELG9CQUNKLENBQUNKLFlBQVlLLGtCQUFrQixJQUMvQkwsWUFBWUssa0JBQWtCLENBQUNwQyxNQUFNLEtBQUssS0FDMUMrQixZQUFZSyxrQkFBa0IsQ0FBQ0YsSUFBSSxDQUFDLFNBQUNHO21CQUNuQ2xDLGdCQUFnQlEsUUFBUSxDQUFDMEI7O1FBRzdCLElBQUlMLGVBQWVHLG1CQUFtQixPQUFPO1FBRTdDLE9BQU87SUFDVDtJQUVBLElBQU1HLGtCQUFrQixTQUFDQztRQUN2QixJQUFJeEQsVUFBVTRCLFFBQVEsQ0FBQyxlQUFlLE9BQU87UUFDN0MsT0FBT1IsZ0JBQWdCUSxRQUFRLENBQUM0QjtJQUNsQztJQUVBLE9BQU87UUFBRXJCLGFBQUFBO1FBQWFvQixpQkFBQUE7UUFBaUJ2RCxXQUFBQTtRQUFXd0IsdUJBQUFBO0lBQXNCO0FBQzFFLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL2hvb2tzL3VzZUF1dGhvcml6YXRpb24udHM/NGZiZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VBcHBTZWxlY3RvciB9IGZyb20gXCJAYXBwL3N0b3JlL3N0b3JlXCI7XHJcbmltcG9ydCB7IE1FTlUsIElNZW51SXRlbSB9IGZyb20gXCJAYXBwL3V0aWxzL21lbnVcIjtcclxuaW1wb3J0IHsgdXNlTWVtbyB9IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgeyB1c2VMb2NhdGlvbiB9IGZyb20gXCJyZWFjdC1yb3V0ZXItZG9tXCI7XHJcblxyXG5leHBvcnQgY29uc3QgdXNlQXV0aG9yaXphdGlvbiA9ICgpID0+IHtcclxuICBjb25zdCBjdXJyZW50VXNlciA9IHVzZUFwcFNlbGVjdG9yKChzdGF0ZSkgPT4gc3RhdGUuYXV0aC5jdXJyZW50VXNlcik7XHJcbiAgY29uc3Qgc2lkZWJhckFjY2Vzc0J5Um9sZSA9IHVzZUFwcFNlbGVjdG9yKFxyXG4gICAgKHN0YXRlKSA9PiBzdGF0ZS5hdXRoLnNpZGViYXJBY2Nlc3NCeVJvbGVcclxuICApO1xyXG4gIGNvbnN0IGxvY2F0aW9uID0gdXNlTG9jYXRpb24oKTtcclxuXHJcbiAgY29uc3QgdXNlclJvbGVzID0gdXNlTWVtbygoKSA9PiB7XHJcbiAgICBjb25zdCBub3JtYWxpemUgPSAocm9sZTogYW55KSA9PiB7XHJcbiAgICAgIGlmICghcm9sZSkgcmV0dXJuIG51bGw7XHJcbiAgICAgIGlmICh0eXBlb2Ygcm9sZSA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIHJvbGU7XHJcbiAgICAgIGlmICh0eXBlb2Ygcm9sZSA9PT0gXCJvYmplY3RcIiAmJiByb2xlLm5hbWUpIHJldHVybiByb2xlLm5hbWU7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCByb2xlc0Zyb21Vc2VyID0gQXJyYXkuaXNBcnJheShjdXJyZW50VXNlcj8ucm9sZXMpXHJcbiAgICAgID8gY3VycmVudFVzZXI/LnJvbGVzLm1hcChub3JtYWxpemUpXHJcbiAgICAgIDogW107XHJcbiAgICBjb25zdCByb2xlRnJvbVVzZXIgPSBjdXJyZW50VXNlcj8ucm9sZSA/IFtub3JtYWxpemUoY3VycmVudFVzZXIucm9sZSldIDogW107XHJcbiAgICBjb25zdCByb2xlc0Zyb21NZXRhZGF0YSA9IEFycmF5LmlzQXJyYXkoY3VycmVudFVzZXI/Lm1ldGFkYXRhPy5yb2xlcylcclxuICAgICAgPyBjdXJyZW50VXNlcj8ubWV0YWRhdGE/LnJvbGVzLm1hcChub3JtYWxpemUpXHJcbiAgICAgIDogY3VycmVudFVzZXI/Lm1ldGFkYXRhPy5yb2xlXHJcbiAgICAgICAgPyBbbm9ybWFsaXplKGN1cnJlbnRVc2VyLm1ldGFkYXRhLnJvbGUpXVxyXG4gICAgICAgIDogW107XHJcblxyXG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IEFycmF5LmZyb20oXHJcbiAgICAgIG5ldyBTZXQoXHJcbiAgICAgICAgWy4uLnJvbGVzRnJvbVVzZXIsIC4uLnJvbGVGcm9tVXNlciwgLi4ucm9sZXNGcm9tTWV0YWRhdGFdLmZpbHRlcihcclxuICAgICAgICAgIEJvb2xlYW5cclxuICAgICAgICApIGFzIHN0cmluZ1tdXHJcbiAgICAgIClcclxuICAgICk7XHJcblxyXG4gICAgLy8gRnJvbnRlbmQgZmFsbGJhY2s6IHRyZWF0IGtub3duIHN1cGVyYWRtaW4gYWNjb3VudCBhcyBzdXBlcmFkbWluXHJcbiAgICBpZiAoXHJcbiAgICAgIG5vcm1hbGl6ZWQubGVuZ3RoID09PSAwICYmXHJcbiAgICAgIGN1cnJlbnRVc2VyICYmXHJcbiAgICAgIHR5cGVvZiAoY3VycmVudFVzZXIgYXMgYW55KS5lbWFpbCA9PT0gXCJzdHJpbmdcIiAmJlxyXG4gICAgICAoY3VycmVudFVzZXIgYXMgYW55KS5lbWFpbC50b0xvd2VyQ2FzZSgpID09PSBcInN1cGVyYWRtaW5AZXhhbXBsZS5jb21cIlxyXG4gICAgKSB7XHJcbiAgICAgIHJldHVybiBbXCJzdXBlcmFkbWluXCJdO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBub3JtYWxpemVkO1xyXG4gIH0sIFtjdXJyZW50VXNlcl0pO1xyXG5cclxuICBjb25zdCB1c2VyUGVybWlzc2lvbnMgPSB1c2VNZW1vKCgpID0+IHtcclxuICAgIGNvbnN0IHBlcm1pc3Npb25zRnJvbVVzZXIgPSBBcnJheS5pc0FycmF5KGN1cnJlbnRVc2VyPy5wZXJtaXNzaW9ucylcclxuICAgICAgPyBjdXJyZW50VXNlcj8ucGVybWlzc2lvbnNcclxuICAgICAgOiBbXTtcclxuICAgIGNvbnN0IHBlcm1pc3Npb25zRnJvbU1ldGFkYXRhID0gQXJyYXkuaXNBcnJheShcclxuICAgICAgY3VycmVudFVzZXI/Lm1ldGFkYXRhPy5wZXJtaXNzaW9uc1xyXG4gICAgKVxyXG4gICAgICA/IGN1cnJlbnRVc2VyPy5tZXRhZGF0YT8ucGVybWlzc2lvbnNcclxuICAgICAgOiBbXTtcclxuXHJcbiAgICByZXR1cm4gQXJyYXkuZnJvbShcclxuICAgICAgbmV3IFNldChcclxuICAgICAgICBbLi4ucGVybWlzc2lvbnNGcm9tVXNlciwgLi4ucGVybWlzc2lvbnNGcm9tTWV0YWRhdGFdLmZpbHRlcihCb29sZWFuKVxyXG4gICAgICApXHJcbiAgICApO1xyXG4gIH0sIFtjdXJyZW50VXNlcl0pO1xyXG5cclxuICBjb25zdCByb2xlQmFzZWRBbGxvd2VkUGF0aHMgPSB1c2VNZW1vKCgpID0+IHtcclxuICAgIGNvbnN0IGFsbG93ZWQgPSBuZXcgU2V0PHN0cmluZz4oKTtcclxuICAgIHVzZXJSb2xlcy5mb3JFYWNoKChyb2xlKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJvbGVBY2Nlc3MgPSBzaWRlYmFyQWNjZXNzQnlSb2xlW3JvbGVdO1xyXG5cclxuICAgICAgaWYgKHJvbGVBY2Nlc3M/LmluY2x1ZGVzKFwiKlwiKSkge1xyXG4gICAgICAgIC8vIEFsbG93IGFsbCBkZWZpbmVkIG1lbnUgcGF0aHNcclxuICAgICAgICBjb25zdCBhZGRQYXRocyA9IChpdGVtczogSU1lbnVJdGVtW10pID0+IHtcclxuICAgICAgICAgIGl0ZW1zLmZvckVhY2goKG0pID0+IHtcclxuICAgICAgICAgICAgaWYgKG0ucGF0aCkgYWxsb3dlZC5hZGQobS5wYXRoKTtcclxuICAgICAgICAgICAgaWYgKG0uY2hpbGRyZW4pIGFkZFBhdGhzKG0uY2hpbGRyZW4pO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBhZGRQYXRocyhNRU5VKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkocm9sZUFjY2VzcykpIHtcclxuICAgICAgICByb2xlQWNjZXNzLmZvckVhY2goKHBhdGgpID0+IGFsbG93ZWQuYWRkKHBhdGgpKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gYWxsb3dlZDtcclxuICB9LCBbc2lkZWJhckFjY2Vzc0J5Um9sZSwgdXNlclJvbGVzXSk7XHJcblxyXG4gIGNvbnN0IGNoZWNrQWNjZXNzID0gKHRhcmdldFBhdGg6IHN0cmluZykgPT4ge1xyXG4gICAgLy8gMS4gQ2hlY2sgaWYgc3VwZXJhZG1pblxyXG4gICAgaWYgKHVzZXJSb2xlcy5pbmNsdWRlcyhcInN1cGVyYWRtaW5cIikpIHJldHVybiB0cnVlO1xyXG5cclxuICAgIC8vIDIuIENoZWNrIGlmIHRoZSBwYXRoIGlzIGV4cGxpY2l0bHkgYWxsb3dlZCB2aWEgZHluYW1pYyBwZXJtaXNzaW9uc1xyXG4gICAgLy8gV2UgbmVlZCB0byBoYW5kbGUgZXhhY3QgbWF0Y2hlcyBvciBzdWItcGF0aHMgaWYgbmVjZXNzYXJ5LlxyXG4gICAgLy8gRm9yIG5vdywgYXNzdW1pbmcgZXhhY3QgcGF0aCBvciBiYXNpYyBwcmVmaXggbWF0Y2ggbWlnaHQgYmUgdHJpY2t5LlxyXG4gICAgLy8gVGhlIGV4aXN0aW5nIGxvZ2ljIHNlZW1zIHRvIGJlIGV4YWN0IHBhdGggYmFzZWQgb24gTWVudSBpdGVtcy5cclxuICAgIGlmIChyb2xlQmFzZWRBbGxvd2VkUGF0aHMuaGFzKHRhcmdldFBhdGgpKSByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgICAvLyAzLiBGaW5kIHRoZSBtZW51IGl0ZW0gY29ycmVzcG9uZGluZyB0byB0aGlzIHBhdGggdG8gY2hlY2sgaXRzIHN0YXRpYyByZXN0cmljdGlvbnNcclxuICAgIC8vIEZsYXR0ZW4gbWVudSB0byBmaW5kIGl0ZW1cclxuICAgIGNvbnN0IGZpbmRJdGVtID0gKFxyXG4gICAgICBpdGVtczogSU1lbnVJdGVtW10sXHJcbiAgICAgIHBhdGg6IHN0cmluZ1xyXG4gICAgKTogSU1lbnVJdGVtIHwgdW5kZWZpbmVkID0+IHtcclxuICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XHJcbiAgICAgICAgLy8gSGFuZGxlIHBhcmFtZXRlcml6ZWQgcm91dGVzOiBlLmcuIC91c2Vycy86aWQvZWRpdCBsb2dpY1xyXG4gICAgICAgIC8vIEJ1dCBNRU5VIGRlZmluaXRpb24gdXN1YWxseSBoYXMgc3RhdGljIHBhdGhzIGxpa2UgL3VzZXJzLlxyXG4gICAgICAgIC8vIElmIHRoZSBNRU5VIHBhdGggaXMgL3VzZXJzLCBkb2VzIGl0IGNvdmVyIC91c2Vycy9jcmVhdGU/XHJcbiAgICAgICAgLy8gVXN1YWxseSByb3V0ZSBwcm90ZWN0aW9uIGlzIGhpZXJhcmNoaWNhbC5cclxuXHJcbiAgICAgICAgLy8gRXhhY3QgbWF0Y2hcclxuICAgICAgICBpZiAoaXRlbS5wYXRoID09PSBwYXRoKSByZXR1cm4gaXRlbTtcclxuXHJcbiAgICAgICAgaWYgKGl0ZW0uY2hpbGRyZW4pIHtcclxuICAgICAgICAgIGNvbnN0IGZvdW5kID0gZmluZEl0ZW0oaXRlbS5jaGlsZHJlbiwgcGF0aCk7XHJcbiAgICAgICAgICBpZiAoZm91bmQpIHJldHVybiBmb3VuZDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH07XHJcblxyXG4gICAgLy8gTm90ZTogVGhlIFNpZGViYXIgbG9naWMgY2hlY2tzIFwiY2FuQWNjZXNzKGl0ZW0pXCIgd2hlcmUgaXRlbSBpcyBpdGVyYXRpbmcgb3ZlciBNRU5VLlxyXG4gICAgLy8gSGVyZSB3ZSBoYXZlIGEgcGF0aCBhbmQgbmVlZCB0byBkZWNpZGUgaWYgd2UgY2FuIGFjY2VzcyBpdC5cclxuXHJcbiAgICAvLyBDaGFsbGVuZ2U6IFRoZSBVUkwgbWlnaHQgYmUgL3VzZXJzL2NyZWF0ZSwgYnV0IE1FTlUgb25seSBoYXMgL3VzZXJzLlxyXG4gICAgLy8gT3IgTUVOVSBoYXMgL3VzZXJzL2NyZWF0ZT9cclxuICAgIC8vIExldCdzIGxvb2sgYXQgTUVOVSBkZWZpbml0aW9ucyBpbiBgbWVudS50c2AgKGV4dHJhY3RlZCkuXHJcbiAgICAvLyAvdXNlcnMgaXMgdGhlcmUuIC91c2Vycy9jcmVhdGUgaXMgTk9UIGluIHRoZSBNRU5VIGNvbnN0YW50IEkgc2F3IGxhdGVyIGluIEFwcC50c3ggbGlzdCwgYnV0IG5vdCBpbiB0aGUgTUVOVSBhcnJheT9cclxuICAgIC8vIFdhaXQsIEFwcC50c3ggaGFzOlxyXG4gICAgLy8gPFJvdXRlIHBhdGg9XCIvdXNlcnMvY3JlYXRlXCIgZWxlbWVudD17PENyZWF0ZVVzZXIgLz59IC8+XHJcbiAgICAvLyBCdXQgTUVOVSBpbiBNZW51U2lkZWJhci50c3ggKGFuZCBub3cgbWVudS50cykgaGFzOlxyXG4gICAgLy8geyBuYW1lOiAuLi4sIHBhdGg6IFwiL3VzZXJzXCIsIGFsbG93ZWRSb2xlczogW1wic3VwZXJhZG1pblwiXSB9XHJcbiAgICAvLyBJdCBkb2VzIE5PVCBoYXZlIC91c2Vycy9jcmVhdGUgZXhwbGljaXRseSBpbiB0aGUgc2lkZWJhciBtZW51LlxyXG5cclxuICAgIC8vIFNvIGlmIEkgbmF2aWdhdGUgdG8gL3VzZXJzL2NyZWF0ZSwgSSBuZWVkIHRvIGtub3cgaXQgYmVsb25ncyB0byB0aGUgXCIvdXNlcnNcIiBjYXBhYmlsaXR5IG9yIGlzIHJlc3RyaWN0ZWQuXHJcbiAgICAvLyBJZiB0aGUgcnVsZSBpcyBcIk9ubHkgc3VwZXJhZG1pbiBjYW4gYWNjZXNzIC91c2Vyc1wiLCBkb2VzIHRoYXQgaW1wbHkgL3VzZXJzL2NyZWF0ZT9cclxuXHJcbiAgICAvLyBDdXJyZW50IE1lbnVTaWRlYmFyIGxvZ2ljOlxyXG4gICAgLy8gSXQgZmlsdGVycyB3aGF0IGlzIFNIT1dOLiBJZiAvdXNlcnMgaXMgaGlkZGVuLCB0aGUgdXNlciBjYW4ndCBjbGljayBpdC5cclxuICAgIC8vIEJ1dCBpZiB0aGV5IHR5cGUgL3VzZXJzL2NyZWF0ZSwgd2UgbmVlZCB0byBibG9jayBpdC5cclxuXHJcbiAgICAvLyBIZXVyaXN0aWM6XHJcbiAgICAvLyBJZiBhIHJlcXVlc3RlZCBwYXRoIHN0YXJ0cyB3aXRoIGEgcmVzdHJpY3RlZCBtZW51IGl0ZW0ncyBwYXRoLCBpdCBzaG91bGQgYmUgcmVzdHJpY3RlZCB1bmxlc3MgZXhwbGljaXQgcGVybWlzc2lvbiBleGlzdHMuXHJcblxyXG4gICAgY29uc3QgbWF0Y2hJdGVtID0gKFxyXG4gICAgICBpdGVtczogSU1lbnVJdGVtW10sXHJcbiAgICAgIHBhdGg6IHN0cmluZ1xyXG4gICAgKTogSU1lbnVJdGVtIHwgdW5kZWZpbmVkID0+IHtcclxuICAgICAgLy8gRmluZCB0aGUgbW9zdCBzcGVjaWZpYyBtYXRjaCAobG9uZ2VzdCBwYXRoIHByZWZpeClcclxuICAgICAgbGV0IGJlc3RNYXRjaDogSU1lbnVJdGVtIHwgdW5kZWZpbmVkO1xyXG5cclxuICAgICAgY29uc3Qgc2VhcmNoID0gKG5vZGVzOiBJTWVudUl0ZW1bXSkgPT4ge1xyXG4gICAgICAgIGZvciAoY29uc3Qgbm9kZSBvZiBub2Rlcykge1xyXG4gICAgICAgICAgaWYgKG5vZGUucGF0aCAmJiBwYXRoLnN0YXJ0c1dpdGgobm9kZS5wYXRoKSkge1xyXG4gICAgICAgICAgICBpZiAoIWJlc3RNYXRjaCB8fCBub2RlLnBhdGgubGVuZ3RoID4gYmVzdE1hdGNoLnBhdGghLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgIGJlc3RNYXRjaCA9IG5vZGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChub2RlLmNoaWxkcmVuKSBzZWFyY2gobm9kZS5jaGlsZHJlbik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG4gICAgICBzZWFyY2goaXRlbXMpO1xyXG4gICAgICByZXR1cm4gYmVzdE1hdGNoO1xyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBtYXRjaGVkSXRlbSA9IG1hdGNoSXRlbShNRU5VLCB0YXJnZXRQYXRoKTtcclxuXHJcbiAgICBpZiAoIW1hdGNoZWRJdGVtKSB7XHJcbiAgICAgIC8vIElmIHRoZSBwYXRoIGlzbid0IGluIHRoZSBtZW51IGxvZ2ljIGF0IGFsbCwgZGVmYXVsdGluZyB0byBBTExPVyBvciBCTE9DSz9cclxuICAgICAgLy8gVXN1YWxseSBpZiBpdCdzIG5vdCBhIHByb3RlY3RlZCBmZWF0dXJlLCBpdCdzIHB1YmxpYz9cclxuICAgICAgLy8gQnV0IHRoZXNlIGFyZSBhdXRoZW50aWNhdGVkIHJvdXRlcy5cclxuICAgICAgLy8gSWYgSSBkb24ndCBrbm93IGFib3V0IGl0LCBtYXliZSBhbGxvdyBpdCAobGlrZSBkYXNoYm9hcmQsIHByb2ZpbGUpLlxyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBJZiB3ZSBmb3VuZCBhbiBpdGVtLCBjaGVjayBpdHMgcm9sZXNcclxuICAgIGNvbnN0IHJvbGVBbGxvd2VkID1cclxuICAgICAgIW1hdGNoZWRJdGVtLmFsbG93ZWRSb2xlcyB8fFxyXG4gICAgICBtYXRjaGVkSXRlbS5hbGxvd2VkUm9sZXMubGVuZ3RoID09PSAwIHx8XHJcbiAgICAgIG1hdGNoZWRJdGVtLmFsbG93ZWRSb2xlcy5zb21lKChyb2xlKSA9PiB1c2VyUm9sZXMuaW5jbHVkZXMocm9sZSkpO1xyXG5cclxuICAgIGNvbnN0IHBlcm1pc3Npb25BbGxvd2VkID1cclxuICAgICAgIW1hdGNoZWRJdGVtLmFsbG93ZWRQZXJtaXNzaW9ucyB8fFxyXG4gICAgICBtYXRjaGVkSXRlbS5hbGxvd2VkUGVybWlzc2lvbnMubGVuZ3RoID09PSAwIHx8XHJcbiAgICAgIG1hdGNoZWRJdGVtLmFsbG93ZWRQZXJtaXNzaW9ucy5zb21lKChwZXJtaXNzaW9uKSA9PlxyXG4gICAgICAgIHVzZXJQZXJtaXNzaW9ucy5pbmNsdWRlcyhwZXJtaXNzaW9uKVxyXG4gICAgICApO1xyXG5cclxuICAgIGlmIChyb2xlQWxsb3dlZCAmJiBwZXJtaXNzaW9uQWxsb3dlZCkgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGNoZWNrUGVybWlzc2lvbiA9IChhY3Rpb246IHN0cmluZykgPT4ge1xyXG4gICAgaWYgKHVzZXJSb2xlcy5pbmNsdWRlcyhcInN1cGVyYWRtaW5cIikpIHJldHVybiB0cnVlO1xyXG4gICAgcmV0dXJuIHVzZXJQZXJtaXNzaW9ucy5pbmNsdWRlcyhhY3Rpb24pO1xyXG4gIH07XHJcblxyXG4gIHJldHVybiB7IGNoZWNrQWNjZXNzLCBjaGVja1Blcm1pc3Npb24sIHVzZXJSb2xlcywgcm9sZUJhc2VkQWxsb3dlZFBhdGhzIH07XHJcbn07XHJcbiJdLCJuYW1lcyI6WyJ1c2VBcHBTZWxlY3RvciIsIk1FTlUiLCJ1c2VNZW1vIiwidXNlTG9jYXRpb24iLCJ1c2VBdXRob3JpemF0aW9uIiwiY3VycmVudFVzZXIiLCJzdGF0ZSIsImF1dGgiLCJzaWRlYmFyQWNjZXNzQnlSb2xlIiwibG9jYXRpb24iLCJ1c2VyUm9sZXMiLCJub3JtYWxpemUiLCJyb2xlIiwibmFtZSIsInJvbGVzRnJvbVVzZXIiLCJBcnJheSIsImlzQXJyYXkiLCJyb2xlcyIsIm1hcCIsInJvbGVGcm9tVXNlciIsInJvbGVzRnJvbU1ldGFkYXRhIiwibWV0YWRhdGEiLCJub3JtYWxpemVkIiwiZnJvbSIsIlNldCIsImZpbHRlciIsIkJvb2xlYW4iLCJsZW5ndGgiLCJlbWFpbCIsInRvTG93ZXJDYXNlIiwidXNlclBlcm1pc3Npb25zIiwicGVybWlzc2lvbnNGcm9tVXNlciIsInBlcm1pc3Npb25zIiwicGVybWlzc2lvbnNGcm9tTWV0YWRhdGEiLCJyb2xlQmFzZWRBbGxvd2VkUGF0aHMiLCJhbGxvd2VkIiwiZm9yRWFjaCIsInJvbGVBY2Nlc3MiLCJpbmNsdWRlcyIsImFkZFBhdGhzIiwiaXRlbXMiLCJtIiwicGF0aCIsImFkZCIsImNoaWxkcmVuIiwiY2hlY2tBY2Nlc3MiLCJ0YXJnZXRQYXRoIiwiaGFzIiwiZmluZEl0ZW0iLCJpdGVtIiwiZm91bmQiLCJ1bmRlZmluZWQiLCJtYXRjaEl0ZW0iLCJiZXN0TWF0Y2giLCJzZWFyY2giLCJub2RlcyIsIm5vZGUiLCJzdGFydHNXaXRoIiwibWF0Y2hlZEl0ZW0iLCJyb2xlQWxsb3dlZCIsImFsbG93ZWRSb2xlcyIsInNvbWUiLCJwZXJtaXNzaW9uQWxsb3dlZCIsImFsbG93ZWRQZXJtaXNzaW9ucyIsInBlcm1pc3Npb24iLCJjaGVja1Blcm1pc3Npb24iLCJhY3Rpb24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/hooks/useAuthorization.ts\n"));

/***/ })

});